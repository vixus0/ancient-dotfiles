#!/bin/bash

function volbar {
  barc="\ue191"

  card=0

  #who="Master"
  who="PCM"

  vol="$(amixer -c $card get ${who} | egrep -o '[0-9]{1,3}%' | awk 'NR==1 {sub("%","");v=int($0/10); print v}')"
  mut="$(amixer -c $card get ${who} | grep "\[on\]")"
  ismute="\\\\f3"
  [[ -z $mut ]] && ismute="\\\\fr"

  echo -n "$ismute"
  for ((i=0; $i<$vol; i++)); do
    echo -n "$barc"
  done

  echo -n "\\\\f2"
  for (( ; $i<10; i++)); do
    echo -n "$barc"
  done
}
